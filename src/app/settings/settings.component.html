<div class="container" *ngIf="isLoaded">
    <ng-template #modalView>
        <div class="modal-container">
            <div class="modal-row">
                <h1>
                    {{ activeProfile.PIN === null ?'Ustaw' : 'Zmień' }} kod PIN
                </h1>
                <button (click)="onCloseModal()">
                    <img src="../assets/icons/cancel.png">
                </button>
            </div>
            <div class="input" *ngIf="activeProfile?.PIN !== null">
                <label>Stary kod PIN</label>
                <input
                    appInputDir
                    type="number"
                    style="-webkit-text-security:disc"
                    #oldPIN
                >
            </div>
            <div class="input">
                <label>Nowy kod PIN</label>
                <input
                    appInputDir
                    type="number"
                    style="-webkit-text-security:disc"
                    #data
                >
            </div>
            <p *ngIf="errorMsg.length > 0" style="color: red;">{{ errorMsg }}</p>
            <button 
                appButtonDir
                (click)="activeProfile.PIN !== null ? onSubmitModal([data.value, oldPIN.nativeElement.value]) : onSubmitModal(data.value)"
            >
                Potwierdź
            </button>
        </div>
    </ng-template>
    <div class="row">
        <button *ngIf="activeProfile?.role === 'admin'" appButtonDir>Status PLUS</button>
        <div class="account-name">
            <div 
                class="widget"
                appWidget
                widgetHeight="300px"
                widgetWidth="300px"
            >
                <img 
                    [src]="activeProfile.role === 'admin' ? '../assets/icons/admin-icon.png' : '../assets/icons/user-icon.png'"
                    width="300px"
                >
            </div>
            <h1>{{ activeProfile.name }}</h1>
        </div>
        <button appButtonDir (click)="onGoBack()">Wróć</button>
    </div>
    <div class="btn-box">
        <button appButtonDir>Zmień nazwę profilu</button>
        <button appButtonDir (click)="onChangePinCode(modalView)">
            {{ activeProfile.PIN === null ?'Ustaw' : 'Zmień' }} kod PIN profilu
        </button>
        <button *ngIf="activeProfile?.role === 'admin'" appButtonDir>Edytuj/usuń profile</button>
        <button appButtonDir>Ustaw limit miesięczny</button>
        <button appButtonDir>Ustaw czas powiadomień</button>
    </div>
</div>